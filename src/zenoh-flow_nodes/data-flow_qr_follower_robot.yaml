flow: qr_follower

vars:
  BASE_DIR_PATH: file:///home/usanz/zs_t3/t3_ws/src/follow_beacon/src/zenoh-flow_nodes

sources:
  - id : source_image
    descriptor : "{{ BASE_DIR_PATH }}/source_image_robot.yml"
operators:
  - id : operator_qr_detector
    descriptor : "{{ BASE_DIR_PATH }}/operator_qr_detector.yml"
  - id : operator_driver
    descriptor : "{{ BASE_DIR_PATH }}/operator_driver.yml"
sinks:
  - id : sink_motors
    configuration:
      Twist: rt/cmd_vel
    descriptor : "builtin://zenoh"
  - id : sink_debug_img
    configuration:
      Debug_Image: rt/debug/image
    descriptor : "builtin://zenoh"

links:
- from:
    node : source_image
    output : Image
  to:
    node : operator_qr_detector
    input : Image
- from:
    node : operator_qr_detector
    output : QR_Data
  to:
    node : operator_driver
    input : QR_Data
- from:
    node : operator_qr_detector
    output : Debug_Image
  to:
    node : sink_debug_img
    input : Debug_Image
- from:
    node : operator_driver
    output : Twist
  to:
    node : sink_motors
    input : Twist

mapping:
  source_image: turtlebot3
  operator_qr_detector: computer
  operator_driver: computer
  sink_motors: computer